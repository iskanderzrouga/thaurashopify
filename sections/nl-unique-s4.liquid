{%- style -%}
  .section-{{ section.id }}-padding {
  padding-top: {{ section.settings.padding_top_m }}px;
  padding-bottom: {{ section.settings.padding_bottom_m }}px;
  }

  @media screen and (min-width: 750px) {
  .section-{{ section.id }}-padding {
  padding-top: {{ section.settings.padding_top }}px;
  padding-bottom: {{ section.settings.padding_bottom }}px;
  }
  }
{%- endstyle -%}

<div
  id="{{ section.settings.section_id }}"
  class="section-{{ section.id }}-padding px-5 relative"
  style="background-color: {{ section.settings.bgcolor }}"
>
  {% if section.settings.bg != blank %}
    {{
      section.settings.bg
      | image_url: width: 1920
      | image_tag: class: 'w-full absolute top-0 left-0 h-full object-cover', sizes: '1920px'
    }}
  {% endif %}

  <div
    class="mx-auto w-full max-w-[1420px] flex flex-col items-center justify-center gap-8 relative"
    style="max-width: {{ section.settings.max_width }}px;"
  >
    <div class="flex flex-col items-center justify-center gap-10 text-center mx-auto relative w-full">
      <div
        class="relative py-6 md:py-10 w-full border border-[#AAAAAA] rounded-[16px]"
        style="background: linear-gradient(to bottom, #FFFFFF, #D0D0D0);"
      >
        {% if section.settings.s4_bg != blank %}
          {{
            section.settings.s4_bg
            | image_url: width: 1140
            | image_tag:
              class: 'w-full absolute top-0 left-0 h-full object-cover border border-[#F6F6F6] rounded-[16px]',
              sizes: '1140px'
          }}
        {% endif %}

        <div class="relative flex flex-col w-full gap-[30px] md:gap-10">
          {% if section.settings.s4_heading != blank %}
            <h2 class="text-[26px] md:text-[36px] font-bold !leading-tight text-[#00754A] text-center px-5 md:px-10">
              {{ section.settings.s4_heading }}
            </h2>
          {% endif %}

          {% if section.settings.s4_description != blank %}
            <div class="text-[16px] md:text-[18px] font-normal !leading-[1.5] text-[#252726] text-center px-5 md:px-10">
              {{ section.settings.s4_description }}
            </div>
          {% endif %}

          <div class="w-full px-5 md:px-10">
            {% for block in section.blocks %}
              {% if block.type == 's4_review' %}
                <div
                  class=" bg-[#F1E0E036] border border-[#AAAAAA] rounded-[16px] w-full grid grid-cols-1 md:grid-cols-2 max-w-[800px] mx-auto"
                >
                  {% if block.settings.image != blank %}
                    {{
                      block.settings.image
                      | image_url: width: 500
                      | image_tag:
                        class: 'w-full h-full object-cover rounded-t-[16px] rounded-bl-[1px] md:rounded-bl-[16px]
              md:rounded-tr-[1px]',
                        sizes: '500px'
                    }}
                  {% endif %}

                  <div class="h-full flex flex-col justify-center gap-4 items-center md:items-start p-5 md:p-10">
                    {% if block.settings.stars != blank %}
                      {{
                        block.settings.stars
                        | image_url: width: 120
                        | image_tag: class: 'w-full max-w-[120px]', sizes: '120px'
                      }}
                    {% endif %}

                    {% if block.settings.description != blank %}
                      <div
                        class="text-[16px] md:text-[17px] font-normal !leading-[1.5] text-[#252726] text-center md:text-left"
                      >
                        {{ block.settings.description }}
                      </div>
                    {% endif %}

                    {% if block.settings.name != blank %}
                      <div class="flex items-center justify-between gap-2 w-full">
                        {% if block.settings.name != blank %}
                          <div class="flex items-center gap-3">
                            {% if block.settings.avatar != blank %}
                              {{
                                block.settings.avatar
                                | image_url: width: 24
                                | image_tag: class: 'w-full max-w-[24px] rounded-[30px]', sizes: '24px'
                              }}
                            {% endif %}
                            <div class="text-[14px] md:text-[16px] font-bold !leading-tight text-[#252726]">
                              {{ block.settings.name }}
                            </div>
                          </div>
                        {% endif %}

                        <div class="flex items-center gap-2">
                          {% if block.settings.icon != blank %}
                            {{
                              block.settings.icon
                              | image_url: width: 14
                              | image_tag: class: 'w-full max-w-[14px]', sizes: '14px'
                            }}
                          {% endif %}
                          {% if block.settings.verified != blank %}
                            <div class="text-[15px] md:text-[15px] font-[300] !leading-tight text-[#252726]">
                              {{ block.settings.verified }}
                            </div>
                          {% endif %}
                        </div>
                      </div>
                    {% endif %}
                  </div>
                </div>
              {% endif %}
            {% endfor %}
          </div>

          <div class="hidden md:grid grid-cols-1 md:grid-cols-6 gap-[10px] md:gap-5 px-5 md:px-10">
            {% for block in section.blocks %}
              {% if block.type == 's4_items_2' %}
                <div
                  class="md:col-span-2 s4_items_2--{{forloop.index}} flex flex-col h-full border border-[#AAAAAA] rounded-[12px]"
                >
                  {% if block.settings.image != blank %}
                    {{
                      block.settings.image
                      | image_url: width: 400
                      | image_tag: class: 'w-full rounded-t-[12px]', sizes: '400px'
                    }}
                  {% endif %}

                  <div class="flex flex-col justify-between text-center flex-1 bg-[#F1E0E036] rounded-b-[12px]">
                    <div
                      class="p-5 flex flex-col {% if block.settings.center_text %} items-center justify-center text-center {% endif %} gap-[14px]"
                    >
                      {% if block.settings.heading != blank %}
                        <div class="text-[17px] md:text-[20px] font-bold !leading-tight text-[#252726]">
                          {{ block.settings.heading }}
                        </div>
                      {% endif %}

                      {% if block.settings.description != blank %}
                        <div class="text-[17px] md:text-[17px] font-normal !leading-[1.5] text-[#252726]">
                          {{ block.settings.description }}
                        </div>
                      {% endif %}
                    </div>
                  </div>
                </div>
              {% endif %}
            {% endfor %}
          </div>

          <div class="flex flex-col md:hidden gap-[10px] px-4">
            {% for block in section.blocks %}
              {% if block.type == 's4_items_2' %}
                <div
                  class="s4_items_2-mobile-card group {% if block.settings.first %} active {% endif %} border border-[#084C25] rounded-[8px]"
                >
                  {% if block.settings.heading != blank %}
                    <div
                      class="s4_items_2-mobile-heading rounded-t-[9px] rounded-b-[9px] group-[.active]:rounded-b-[1px] bg-white flex items-center justify-between p-3 group-[.active]:bg-[#084C25]"
                    >
                      <div
                        class="text-[16px] md:text-[20px] font-bold !leading-tight text-[#252726] group-[.active]:text-white text-left"
                      >
                        {{ block.settings.heading }}
                      </div>
                      <span class="block group-[.active]:hidden">
                        <svg width="18" height="11" viewBox="0 0 18 11" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <path
                            d="M1.88184 1.46973C1.78419 1.37213 1.62594 1.3721 1.52832 1.46973L1.1748 1.82324C1.07718 1.92087 1.07721 2.07912 1.1748 2.17676L8.82129 9.82324C8.91893 9.92088 9.07717 9.92088 9.1748 9.82324L16.8213 2.17676C16.9189 2.07912 16.9189 1.92088 16.8213 1.82324L16.4678 1.46973C16.3702 1.37211 16.2119 1.37211 16.1143 1.46973L8.99805 8.58594L1.88184 1.46973Z"
                            fill="#25505F" stroke="#25505F" />
                        </svg>
                      </span>
                      <span class="hidden group-[.active]:block">
                        <svg width="18" height="11" viewBox="0 0 18 11" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <path
                            d="M16.1182 9.53027C16.2158 9.62787 16.3741 9.6279 16.4717 9.53027L16.8252 9.17676C16.9228 9.07913 16.9228 8.92088 16.8252 8.82324L9.17871 1.17676C9.08107 1.07912 8.92283 1.07912 8.8252 1.17676L1.17871 8.82324C1.08109 8.92088 1.08108 9.07912 1.17871 9.17676L1.53223 9.53027C1.62984 9.62789 1.7881 9.62789 1.88574 9.53027L9.00195 2.41406L16.1182 9.53027Z"
                            fill="white" stroke="white" />
                        </svg>
                      </span>
                    </div>
                  {% endif %}

                  <div class="rounded-b-[9px] bg-white p-3 hidden group-[.active]:flex gap-3">
                    {% if block.settings.image != blank %}
                      {{
                        block.settings.image_mobile
                        | image_url: width: 100
                        | image_tag: class: 'w-full rounded-t-[5px] max-w-[80px] h-fit object-contain', sizes: '100px'
                      }}
                    {% endif %}
                    {% if block.settings.description != blank %}
                      <div class="text-[14px] md:text-[17px] font-normal !leading-[1.5] text-[#252726] flex-1 text-left">
                        {{ block.settings.description }}
                      </div>
                    {% endif %}
                  </div>
                </div>
              {% endif %}
            {% endfor %}
          </div>

          <div class="w-full flex flex-col items-center justify-center gap-[10px] px-5">
            {% if section.settings.button_label != blank %}
              <div class="w-full md:w-fit mx-auto">
                <a href="{{ section.settings.button_url }}" class="new-button--{{section.settings.button_type}}">
                  {{ section.settings.button_label }}
                  {% if section.settings.button_type == 'primary' %}
                    {%- render 'icon-arrow-right' -%}
                  {% elsif section.settings.button_type == 'secondary' %}
                    {%- render 'icon-arrow-right-secondary' -%}
                  {% endif %}
                </a>
              </div>
            {% endif %}

            {% if section.settings.product_bottom_label != blank %}
              <div class="flex items-center gap-2 mt-3 md:mt-4 relative w-fit mx-auto">
                {% if section.settings.bottom_label_icon != blank %}
                  {{
                    section.settings.bottom_label_icon
                    | image_url: width: 24
                    | image_tag: class: 'w-full max-w-[20px] md:max-w-[24px]'
                  }}
                {% endif %}

                <div
                  class="text-[15px] md:text-[15px] text-[#000] font-normal !leading-tight"
                  style="color: {{ section.settings.text_color }};"
                >
                  {{ section.settings.product_bottom_label }}
                </div>
              </div>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  document.querySelectorAll('.s4_items_2-mobile-heading').forEach((heading) => {
    heading.addEventListener('click', () => {
      const parentCard = heading.closest('.s4_items_2-mobile-card');
      const isActive = parentCard.classList.contains('active');

      // Remove .active from all cards
      document.querySelectorAll('.s4_items_2-mobile-card').forEach((card) => {
        card.classList.remove('active');
      });

      // If it wasn't active before, activate it
      if (!isActive) {
        parentCard.classList.add('active');
      }
    });
  });
</script>

{% schema %}
{
  "name": "NL Unique S4",
  "settings": [
    {
      "type": "text",
      "id": "section_id",
      "label": "Section ID"
    },
    {
      "type": "header",
      "content": "Section 4"
    },
    {
      "type": "image_picker",
      "id": "s4_bg",
      "label": "Background Image"
    },
    {
      "type": "text",
      "id": "s4_heading",
      "label": "Heading"
    },
    {
      "type": "richtext",
      "id": "s4_description",
      "label": "Description"
    },
    {
      "type": "richtext",
      "id": "s4_subheading",
      "label": "Sub Heading"
    },
    {
      "type": "richtext",
      "id": "s4_description_2",
      "label": "Description 2"
    },
    {
      "type": "text",
      "id": "button_label",
      "label": "Button Label"
    },
    {
      "type": "url",
      "id": "button_url",
      "label": "Button URL"
    },
    {
      "type": "select",
      "id": "button_type",
      "options": [
        {
          "value": "primary",
          "label": "Primary"
        },
        {
          "value": "secondary",
          "label": "Secondary"
        },
        {
          "value": "tertiary",
          "label": "Tertiary"
        }
      ],
      "default": "primary",
      "label": "Button Type"
    },
    {
      "type": "text",
      "id": "product_bottom_label",
      "label": "Product Bottom Label"
    },
    {
      "type": "image_picker",
      "id": "bottom_label_icon",
      "label": "Bottom Label Icon"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text Color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "bgcolor",
      "label": "Background Color",
      "default": "#ffffff"
    },
    {
      "type": "image_picker",
      "id": "bg",
      "label": "Background Image"
    },
    {
      "type": "range",
      "id": "max_width",
      "min": 600,
      "max": 1800,
      "step": 20,
      "unit": "px",
      "label": "Max Width",
      "default": 1200
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 2,
      "unit": "px",
      "label": "Padding Top",
      "default": 72
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 2,
      "unit": "px",
      "label": "Padding Bottom",
      "default": 72
    },
    {
      "type": "range",
      "id": "padding_top_m",
      "min": 0,
      "max": 100,
      "step": 2,
      "unit": "px",
      "label": "Padding Top (Mobile)",
      "default": 36
    },
    {
      "type": "range",
      "id": "padding_bottom_m",
      "min": 0,
      "max": 100,
      "step": 2,
      "unit": "px",
      "label": "Padding Bottom (Mobile)",
      "default": 36
    }
  ],
  "blocks": [
    {
      "type": "s1_items",
      "name": "S1 Items",
      "settings": [
        {
          "type": "richtext",
          "id": "description",
          "label": "Description"
        },
        {
          "type": "image_picker",
          "id": "icon",
          "label": "Icon"
        }
      ]
    },
    {
      "type": "s2_items_1",
      "name": "S2 Items 1",
      "settings": [
        {
          "type": "text",
          "id": "number",
          "label": "Number"
        },
        {
          "type": "text",
          "id": "heading",
          "label": "Heading"
        },
        {
          "type": "richtext",
          "id": "description",
          "label": "Description"
        }
      ]
    },
    {
      "type": "s2_items_2",
      "name": "S2 Items 2",
      "settings": [
        {
          "type": "image_picker",
          "id": "icon",
          "label": "Icon"
        },
        {
          "type": "richtext",
          "id": "description",
          "label": "Description"
        }
      ]
    },
    {
      "type": "s3_items",
      "name": "S3 Items",
      "settings": [
        {
          "type": "text",
          "id": "description",
          "label": "Description"
        }
      ]
    },
    {
      "type": "s4_review",
      "name": "S4 Review",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "image_picker",
          "id": "stars",
          "label": "Stars"
        },
        {
          "type": "richtext",
          "id": "description",
          "label": "Description"
        },
        {
          "type": "text",
          "id": "name",
          "label": "Name"
        },
        {
          "type": "image_picker",
          "id": "avatar",
          "label": "Avatar"
        },
        {
          "type": "image_picker",
          "id": "icon",
          "label": "Icon"
        },
        {
          "type": "text",
          "id": "verified",
          "label": "Verified"
        }
      ]
    },
    {
      "type": "s4_items",
      "name": "S4 Items",
      "settings": [
        {
          "type": "text",
          "id": "description",
          "label": "Description"
        },
        {
          "type": "image_picker",
          "id": "icon",
          "label": "Icon"
        }
      ]
    },
    {
      "type": "s4_items_2",
      "name": "S4 Items 2",
      "settings": [
        {
          "type": "checkbox",
          "id": "first",
          "label": "First",
          "default": false
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "image_picker",
          "id": "image_mobile",
          "label": "Image Mobile"
        },
        {
          "type": "text",
          "id": "heading",
          "label": "Heading"
        },
        {
          "type": "text",
          "id": "description",
          "label": "Description"
        }
      ]
    },
    {
      "type": "s4_items_3",
      "name": "S4 Items 3",
      "settings": [
        {
          "type": "text",
          "id": "number",
          "label": "Number"
        },
        {
          "type": "text",
          "id": "heading",
          "label": "Heading"
        },
        {
          "type": "text",
          "id": "description",
          "label": "Description"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "NL Unique S4"
    }
  ]
}
{% endschema %}

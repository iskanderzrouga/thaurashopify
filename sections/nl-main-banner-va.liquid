{%- style -%}
  .section-{{ section.id }}-padding {
    padding-top: {{ section.settings.padding_top_m }}px;
    padding-bottom: {{ section.settings.padding_bottom_m }}px;
  }

  @media screen and (min-width: 750px) {
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }
{%- endstyle -%}

{% assign highlight_text = '' %}
{% if section.settings.highlight != blank %}
  {% assign highlight_text = section.settings.highlight %}
{% endif %}

<div
  id="{{ section.settings.section_id }}"
  class="section-{{ section.id }}-padding md:px-5 relative"
  style="background-color: {{ section.settings.bgcolor }}"
>
  {% if section.settings.image != blank %}
    {{
      section.settings.image
      | image_url: width: 1920
      | image_tag:
        class: 'absolute bottom-0 right-0 w-fit h-fit object-contain max-w-[100%] max-h-[100%] hidden md:block',
        sizes: '1920px',
        preload: true
    }}
  {% endif %}

  <div class="flex md:hidden flex-col gap-5 items-center">
    {% for block in section.blocks %}
      {% case block.type %}
        {% when 'star_review' %}
          <div class="flex items-center gap-3 justify-center -mb-3">
            {% if block.settings.stars != blank %}
              {{
                block.settings.stars
                | image_url: width: 96
                | image_tag: class: 'w-full max-w-[80px] md:max-w-[96px]', sizes: '96px', preload: true
              }}
            {% endif %}
            <div>
              {% if block.settings.rating != blank %}
                <span class="text-[12px] md:text-[16px] font-medium !leading-tight text-[#000000]">
                  {{ block.settings.rating }}
                </span>
              {% endif %}
              {% if block.settings.text != blank %}
                <span class="text-[12px] md:text-[16px] font-medium !leading-tight text-[#000000] underline">
                  {{ block.settings.text }}
                </span>
              {% endif %}
            </div>
          </div>
      {% endcase %}
    {% endfor %}

    {% if section.settings.heading != blank %}
      <h1 class="text-[23px] lg:text-[42px] font-bold !leading-tight text-[#000000] block md:hidden text-center px-5 [&>strong]:bg-[#084C25]  [&>strong]:text-white [&>strong]:px-1 [&>strong]:py-1">
        {{ section.settings.heading | highlight: highlight_text }}
      </h1>
    {% endif %}

    {% for block in section.blocks %}
      {% case block.type %}
        {% when 'review' %}
          <div class="flex items-center gap-3">
            {% if block.settings.image != blank %}
              {{
                block.settings.image
                | image_url: width: 40
                | image_tag: class: 'w-full max-w-[40px]', sizes: '40px', preload: true
              }}
            {% endif %}

            <div class="flex flex-col gap-1">
              {% if block.settings.name != blank %}
                <div class="text-[17px] md:text-[18px] font-medium !leading-tight text-[#000000]">
                  {{ block.settings.name }}
                </div>
              {% endif %}
              <div class="flex items-center gap-1">
                {% if block.settings.image != blank %}
                  {{
                    block.settings.icon
                    | image_url: width: 14
                    | image_tag: class: 'w-full max-w-[14px]', sizes: '14px', preload: true
                  }}
                {% endif %}
                {% if block.settings.heading != blank %}
                  <div class="text-[12px] md:text-[14px] font-normal !leading-tight text-[#000000]">
                    {{ block.settings.heading }}
                  </div>
                {% endif %}
              </div>
            </div>
          </div>
      {% endcase %}
    {% endfor %}

    {% if section.settings.image_m != blank %}
      {{ section.settings.image_m | image_url: width: 700 | image_tag: class: 'w-full', sizes: '700px', preload: true }}
    {% endif %}
  </div>

  <div class="mx-auto w-full relative" style="max-width: {{ section.settings.max_width }}px;">
    <div class="absolute bottom-[20%] right-[5%] hidden md:flex">
      {% for block in section.blocks %}
        {% case block.type %}
          {% when 'card_review' %}
            <div class="w-[40%] ml-auto">
              <div class="p-5 border border-[#1E3A16] rounded-[16px] gap-3 bg-[#F6F7EF]">
                <div class="flex flex-col gap-3">
                  <div class="flex gap-1 items-center">
                    {% if block.settings.image != blank %}
                      {{
                        block.settings.image
                        | image_url: width: 20
                        | image_tag: class: 'w-full max-w-[20px]', sizes: '20px', preload: true
                      }}
                    {% endif %}
                    {% if block.settings.name != blank %}
                      <div class="text-[12px] md:text-[13px] font-normal !leading-tight text-[#252726]">
                        {{ block.settings.name }}
                      </div>
                    {% endif %}
                    {% if block.settings.icon != blank %}
                      {{
                        block.settings.icon
                        | image_url: width: 12
                        | image_tag: class: 'w-full max-w-[12px] md:max-w-[12px] ml-5', sizes: '12px', preload: true
                      }}
                    {% endif %}
                    {% if block.settings.verified != blank %}
                      <div class="text-[12px] md:text-[13px] font-normal !leading-tight text-[#252726]">
                        {{ block.settings.verified }}
                      </div>
                    {% endif %}
                  </div>

                  {% if block.settings.text != blank %}
                    <div class="text-[14px] md:text-[15px] font-normal !leading-tight text-[#252726]">
                      {{ block.settings.text }}
                    </div>
                  {% endif %}
                </div>
              </div>
            </div>
        {% endcase %}
      {% endfor %}
    </div>
    <div class="grid grid-cols-1 md:grid-cols-5">
      <div class="nl-main-banner__bottom md:col-span-3 flex flex-col gap-5 bg-[#173227] md:bg-transparent px-4 md:px-0 py-8 md:py-0">
        {% for block in section.blocks %}
          {% case block.type %}
            {% when 'star_review' %}
              <div class="hidden md:flex items-center gap-3">
                {% if block.settings.stars != blank %}
                  {{
                    block.settings.stars
                    | image_url: width: 96
                    | image_tag: class: 'w-full max-w-[80px] md:max-w-[96px]', sizes: '96px', preload: true
                  }}
                {% endif %}
                <div>
                  {% if block.settings.rating != blank %}
                    <span class="text-[12px] md:text-[16px] font-medium !leading-tight text-[#000000]">
                      {{ block.settings.rating }}
                    </span>
                  {% endif %}
                  {% if block.settings.text != blank %}
                    <span class="text-[12px] md:text-[16px] font-medium !leading-tight text-[#000000] underline">
                      {{ block.settings.text }}
                    </span>
                  {% endif %}
                </div>
              </div>
          {% endcase %}
        {% endfor %}

        {% if section.settings.heading != blank %}
          <h1 class="text-[23px] lg:text-[42px] font-bold !leading-tight text-[#000000] hidden md:block [&>strong]:bg-[#084C25] [&>strong]:text-white [&>strong]:px-1 [&>strong]:py-1">
            {{ section.settings.heading | highlight: highlight_text }}
          </h1>
        {% endif %}

        {% for block in section.blocks %}
          {% case block.type %}
            {% when 'description' %}
              {% if block.settings.description != blank %}
                <div class="text-[16px] md:text-[20px] font-normal !leading-tight text-white md:text-[#000000] max-w-[520px]">
                  {{ block.settings.description }}
                </div>
              {% endif %}

            {% when 'review' %}
              <div class="hidden md:flex items-center gap-3">
                {% if block.settings.image != blank %}
                  {{
                    block.settings.image
                    | image_url: width: 40
                    | image_tag: class: 'w-full max-w-[40px]', sizes: '40px', preload: true
                  }}
                {% endif %}

                <div class="flex flex-col gap-1">
                  {% if block.settings.name != blank %}
                    <div class="text-[17px] md:text-[18px] font-medium !leading-tight text-[#000000]">
                      {{ block.settings.name }}
                    </div>
                  {% endif %}
                  <div class="flex items-center gap-1">
                    {% if block.settings.image != blank %}
                      {{
                        block.settings.icon
                        | image_url: width: 14
                        | image_tag: class: 'w-full max-w-[14px]', sizes: '14px', preload: true
                      }}
                    {% endif %}
                    {% if block.settings.heading != blank %}
                      <div class="text-[12px] md:text-[14px] font-normal !leading-tight text-[#000000]">
                        {{ block.settings.heading }}
                      </div>
                    {% endif %}
                  </div>
                </div>
              </div>

            {% when 'mobile_card_review' %}
              <div class="px-4 -mt-[110px] block md:hidden">
                <div class="flex items-center md:hidden  p-3 border border-[#1E3A16] rounded-[16px] gap-3 bg-[#F6F7EF]">
                  {% if block.settings.image != blank %}
                    {{
                      block.settings.image
                      | image_url: width: 54
                      | image_tag: class: 'w-full max-w-[54px]', sizes: '54px', preload: true
                    }}
                  {% endif %}

                  <div class="flex flex-col gap-1">
                    <div class="flex gap-1 flex-1 flex-col">
                      {% if block.settings.stars != blank %}
                        {{
                          block.settings.stars
                          | image_url: width: 96
                          | image_tag: class: 'w-full max-w-[72px] md:max-w-[96px]', sizes: '96px', preload: true
                        }}
                      {% endif %}

                      {% if block.settings.heading != blank %}
                        <div class="text-[14px] md:text-[14px] font-bold !leading-tight text-[#1E3A16]">
                          {{ block.settings.heading }}
                        </div>
                      {% endif %}

                      {% if block.settings.text != blank %}
                        <div class="text-[12px] md:text-[18px] font-normal !leading-tight text-[#333333]">
                          {{ block.settings.text }}
                        </div>
                      {% endif %}
                    </div>
                  </div>
                </div>
              </div>

            {% when 'card_review' %}
              <div class="px-4 -mt-[110px] block md:hidden">
                <div class="p-3 border border-[#1E3A16] rounded-[16px] gap-3 bg-[#F6F7EF]">
                  <div class="flex flex-col gap-1">
                    <div class="flex gap-1 items-center">
                      {% if block.settings.image != blank %}
                        {{
                          block.settings.image
                          | image_url: width: 20
                          | image_tag: class: 'w-full max-w-[20px]', sizes: '20px', preload: true
                        }}
                      {% endif %}
                      {% if block.settings.name != blank %}
                        <div class="text-[12px] md:text-[13px] font-normal !leading-tight text-[#252726]">
                          {{ block.settings.name }}
                        </div>
                      {% endif %}
                      {% if block.settings.icon != blank %}
                        {{
                          block.settings.icon
                          | image_url: width: 12
                          | image_tag: class: 'w-full max-w-[12px] md:max-w-[12px] ml-5', sizes: '12px', preload: true
                        }}
                      {% endif %}
                      {% if block.settings.verified != blank %}
                        <div class="text-[12px] md:text-[13px] font-normal !leading-tight text-[#252726]">
                          {{ block.settings.verified }}
                        </div>
                      {% endif %}
                    </div>

                    {% if block.settings.text != blank %}
                      <div class="text-[14px] md:text-[15px] font-normal !leading-tight text-[#252726]">
                        {{ block.settings.text }}
                      </div>
                    {% endif %}
                  </div>
                </div>
              </div>

            {% when 'feature_wrapper' %}
              <div class="flex flex-col gap-[10px]">
                {% for block in section.blocks %}
                  {% if block.type == 'feature' %}
                    <div class="flex items-center gap-2">
                      {{
                        block.settings.icon
                        | image_url: width: 16
                        | image_tag: class: 'w-full max-w-[16px]', preload: true
                      }}
                      <div
                        class="text-white md:text-[#000] text-base md:text-[18px] font-normal !leading-tight"
                        style="color: {{section.settings.color_primary}};"
                      >
                        {{ block.settings.description }}
                      </div>
                    </div>
                  {% endif %}
                {% endfor %}
              </div>

            {% when 'button' %}
              <div class="flex items-center justify-center gap-[10px] flex-col mt-3 max-w-[480px]">
                {% if section.settings.product_bottom_label != blank %}
                  <div
                    class="text-sm md:text-[15px] text-white md:text-[#000] font-normal !leading-tight text-center"
                  >
                    {{ section.settings.product_bottom_label }}
                  </div>
                {% endif %}

                {% if section.settings.button_label != blank %}
                  <div class="w-full max-md:hidden">
                    <a href="{{ section.settings.button_url }}" class="new-button--primary">
                      {{ section.settings.button_label }}
                      {%- render 'icon-arrow-right' -%}
                    </a>
                  </div>
                  <div class="w-full md:hidden">
                    <a href="{{ section.settings.button_url }}" class="new-button--secondary">
                      {{ section.settings.button_label }}
                      {%- render 'icon-arrow-right-secondary' -%}
                    </a>
                  </div>
                {% endif %}

                {% if section.settings.product_bottom_text != blank %}
                  <div class="flex items-center gap-2 relative w-fit mx-auto">
                    {% if section.settings.bottom_label_icon != blank %}
                      {{
                        section.settings.bottom_label_icon
                        | image_url: width: 24
                        | image_tag: class: 'w-full max-w-[20px] md:max-w-[24px]'
                      }}
                    {% endif %}

                    <div
                      class="text-[15px] md:text-[15px] text-white md:text-[#000] font-normal !leading-tight"
                      style="color: {{ section.settings.text_color }};"
                    >
                      {{ section.settings.product_bottom_text }}
                    </div>
                  </div>
                {% endif %}
              </div>
          {% endcase %}
        {% endfor %}
      </div>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "NL Main Banner",
  "settings": [
    {
      "type": "text",
      "id": "section_id",
      "label": "Section ID"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading"
    },
    {
      "type": "text",
      "id": "highlight",
      "label": "Highlight"
    },
    {
      "type": "image_picker",
      "id": "product_image",
      "label": "Product Image"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Image"
    },
    {
      "type": "image_picker",
      "id": "image_m",
      "label": "Image Mobile"
    },
    {
      "type": "text",
      "id": "button_label",
      "label": "Button Label"
    },
    {
      "type": "url",
      "id": "button_url",
      "label": "Button URL"
    },
    {
      "type": "select",
      "id": "button_type",
      "options": [
        {
          "value": "primary",
          "label": "Primary"
        },
        {
          "value": "secondary",
          "label": "Secondary"
        },
        {
          "value": "tertiary",
          "label": "Tertiary"
        }
      ],
      "default": "primary",
      "label": "Button Type"
    },
    {
      "type": "text",
      "id": "product_bottom_label",
      "label": "Product Bottom Label"
    },
    {
      "type": "image_picker",
      "id": "bottom_label_icon",
      "label": "Bottom Label Icon"
    },
    {
      "type": "richtext",
      "id": "product_bottom_text",
      "label": "Product Bottom Text"
    },
    {
      "type": "color",
      "id": "bgcolor",
      "label": "background Color",
      "default": "#ffffff"
    },
    {
      "type": "range",
      "id": "max_width",
      "min": 600,
      "max": 1800,
      "step": 20,
      "unit": "px",
      "label": "Max Width",
      "default": 1200
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 2,
      "unit": "px",
      "label": "Padding Top",
      "default": 72
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 2,
      "unit": "px",
      "label": "Padding Bottom",
      "default": 72
    },
    {
      "type": "range",
      "id": "padding_top_m",
      "min": 0,
      "max": 100,
      "step": 2,
      "unit": "px",
      "label": "Padding Top (Mobile)",
      "default": 36
    },
    {
      "type": "range",
      "id": "padding_bottom_m",
      "min": 0,
      "max": 100,
      "step": 2,
      "unit": "px",
      "label": "Padding Bottom (Mobile)",
      "default": 36
    }
  ],
  "blocks": [
    {
      "type": "description",
      "name": "Description",
      "settings": [
        {
          "type": "richtext",
          "id": "description",
          "label": "Description"
        }
      ]
    },
    {
      "type": "review",
      "name": "Review",
      "settings": [
        {
          "type": "text",
          "id": "name",
          "label": "Name"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "image_picker",
          "id": "icon",
          "label": "Icon"
        },
        {
          "type": "text",
          "id": "heading",
          "label": "Heading"
        }
      ]
    },
    {
      "type": "star_review",
      "name": "Star Review",
      "settings": [
        {
          "type": "image_picker",
          "id": "stars",
          "label": "Stars"
        },
        {
          "type": "text",
          "id": "rating",
          "label": "Rating"
        },
        {
          "type": "text",
          "id": "text",
          "label": "Text"
        }
      ]
    },
    {
      "type": "mobile_card_review",
      "name": "Mobile Card Review",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "image_picker",
          "id": "stars",
          "label": "Stars"
        },
        {
          "type": "text",
          "id": "heading",
          "label": "Heading"
        },
        {
          "type": "text",
          "id": "text",
          "label": "Text"
        }
      ]
    },
    {
      "type": "card_review",
      "name": "Card Review",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "text",
          "id": "name",
          "label": "Name"
        },
        {
          "type": "image_picker",
          "id": "icon",
          "label": "Icon"
        },
        {
          "type": "text",
          "id": "verified",
          "label": "Verified"
        },
        {
          "type": "richtext",
          "id": "text",
          "label": "Text"
        }
      ]
    },
    {
      "type": "feature_wrapper",
      "name": "Feature Wrapper",
      "settings": []
    },
    {
      "type": "feature",
      "name": "Feature",
      "settings": [
        {
          "type": "image_picker",
          "id": "icon",
          "label": "Icon"
        },
        {
          "type": "text",
          "id": "description",
          "label": "Description"
        }
      ]
    },
    {
      "type": "button",
      "name": "Button",
      "settings": []
    }
  ],
  "presets": [
    {
      "name": "NL Main Banner"
    }
  ]
}
{% endschema %}
